# Changelog Configuration
# This file configures the valid values for changelog fields using the pivot structure.
# Place this file as `changelog.yml` in the `docs/` directory

# Products configuration (optional)
# If not specified, all products from products.yml are allowed
products:
  # List of available product IDs (empty = all from products.yml)
  available:
    - elasticsearch
    - cloud-serverless
  # Default products when --products not specified
  # default:
  #   - product: elasticsearch
  #     lifecycle: ga

# Extraction configuration
# Controls automatic extraction of information from PR descriptions
extract:
  # Auto-extract release notes from PR descriptions (default: true)
  # Can be overridden by CLI --no-extract-release-notes
  release_notes: true
  # Auto-extract issues from PR body (default: true)
  # Looks for patterns like "Fixes #123", "Closes #456", etc.
  issues: true

# Available lifecycle values (strongly typed: preview, beta, ga)
lifecycles:
  - preview
  - beta
  - ga

# Pivot configuration for types, subtypes, and areas with label mappings.
# By default we render entries grouped by type > subtype > area.
# NOTE: subtype and area are optional and either may be omitted.
# Labels are specified in a "label -> value" format
# pivot:
  # Type definitions with optional labels
  # Keys are type names, values can be:
  #   - simple string: comma-separated label list (e.g., ">bug, >fix")
  #   - empty/null: no labels for this type
  #   - object: { labels: "...", subtypes: {...} } for breaking-change type only
  # types:
    # Complex object form with subtypes (ONLY allowed for breaking-change)
    # Subtypes help categorize breaking changes by their nature
    # breaking-change:
      # labels: ">breaking"
    #   subtypes:
      #   api: ">api-breaking"
      #   behavioral: ">behavioral-breaking"
      #   configuration: ">config-breaking"
      #   dependency: ">dependency-breaking"
      #   subscription: ">subscription-breaking"
      #   plugin: ">plugin-breaking"
      #   security: ">security-breaking"
        # other: ">breaking-java"
    # Simple string form: labels as comma-separated string
    # bug-fix: ">bug"
    # deprecation: ">deprecation"
    # docs: "documentation"
    # enhancement: ">enhancement"
    # feature: ">feature"
    # known-issue: "release_note:known-issue" 
    # regression: ">regression"
    # security: "release_note:security"
    # other: ">upgrade"

  # Area definitions with labels
  # Keys are area display names, values are label strings
  # Multiple labels can be comma-separated
  # areas:
    # Example mappings - customize based on your label naming conventions
    # Aggregations: ":Analytics/Aggregations"
    # Analysis: ":Search Relevance/Analysis"
    # Application: ":EnterpriseSearch/Application"
    # Authorization: ":Security/Authorization"
    # "CAT APIs": ":Data Management/CAT APIs"
    # CRUD: ":Distributed Indexing/CRUD"
    # Client: ":Security/Client"
    # "Data streams": ":Data Management/Data streams, :StorageEngine/Data streams"
    # Distributed: ":Distributed Coordination/Distributed"
    # DLM: ":Data Management/DLM"
    # Downsampling: ":StorageEngine/Downsampling"
    # Engine: ":Distributed Indexing/Engine, :Analytics/Compute Engine"
    # "ES|QL": ":Search Relevance/ES|QL, :StorageEngine/ES|QL, :ml/ES|QL, :Analytics/ES|QL"
    # EQL: ":Query Languages/EQL, :Analytics/EQL"
    # Experiences: ":SearchOrg/Experiences"
    # "Extract and transform": ":SearchOrg/Extract&Transform"
    # # Features: TBD
    # Geo: ":Analytics/Geo"
    # # Graph: TBD
    # Highlighting: ":Search Relevance/Highlighting"
    # "Indices APIs": ":Data Management/Indices APIs"
    # Inference: ":SearchOrg/Inference"
    # "Infra/REST API": ":Core/Infra/REST API"
    # "Infra/Resiliency": ":Core/Infra/Resiliency"
    # "Infra/Scripting": ":Core/Infra/Scripting"
    # "Infra/Settings": ":Core/Infra/Settings"
    # # Ingest: TBD
    # "Ingest node": ":Distributed/Ingest Node"
    # "Java High Level REST Client": ":Clients/Java High Level REST Client"
    # "Java Low Level REST Client": ":Clients/Java Low Level REST Client"
    # # Logging: TBD
    # Logs: ":StorageEngine/Logs, StorageEngine/Logs"
    # "Machine learning": ":ml"
    # Mapping: ":StorageEngine/Mapping, :Search Foundations/Mapping"
    # Network: ":Distributed Coordination/Network"
    # Percolator: ":Search Relevance/Percolator"
    # Performance: ":Performance"
    # "Query languages": ":Query Languages/EQL, :Query Languages/SQL"
    # Ranking: ":Search Relevance/Ranking"
    # Recovery: ":Distributed Indexing/Recovery"
    # Reindex: ":Distributed Indexing/Reindex"
    # Relevance: ":Search Relevance/Search, :SearchOrg/Relevance"
    # Rollup: ":StorageEngine/Rollup"
    # Search: ":Search/Search, :Search Foundations/Search"
    # Security: ":Security/Security"
    # SQL: ":Query Languages/SQL, :Analytics/SQL"
    # Store: ":Distributed Indexing/Store"
    # Suggesters: ":Search Relevance/Suggesters"
    # "Task management": ":Distributed Coordination/Task Management"
    # TLS: ":Security/TLS"
    # Transform: ":ml/Transform"
    # TSDB: ":StorageEngine/TSDB"
    # "Vector search": ":Search Relevance/Vectors"

# Product-specific label blockers (optional)
# Maps product IDs to lists of labels that prevent changelog creation for that product
# If you run the changelog add command with the --prs option and a PR has any of these labels, the changelog is not created

# Block configuration - combined create and publish blockers
block:
  # Global labels that block changelog creation for all products (comma-separated string)
  # create: ">non-issue, >test, >refactoring, :Delivery/Build, :Delivery/Tooling"
  # Block changelog entries from publishing based on entry type or area
  # publish:
    # types:
      # - docs
  #   areas:
  #     - "Internal"
  # Product-specific overrides (override global blockers, don't merge)
  # Dictionary key can be a single product ID or comma-separated product IDs
  product:
    'cloud-serverless':
      # create: ">non-issue, >test, >refactoring, :Delivery/Build, :Delivery/Tooling, :Distributed Coordination/Allocation, :Security/Audit, :Security/Authentication, :Distributed Coordination/Autoscaling, :Distributed Indexing/CCR, :Search Foundations/CCS, :Distributed Coordination/Cluster Coordination, :StorageEngine/Codec, :Distributed Coordination/Discovery-Plugins, :Security/FIPS, :Distributed/Health, :StorageEngine/ILM, :Data Management/ILM+SLM, :Security/IdentityProvider, :Core/Infra/CLI, :Core/Infra/Circuit Breakers, :Core/Infra/Core, :Core/Infra/Entitlements, :Core/Infra/Logging, :Core/Infra/Metrics, :Core/Infra/Node Lifecycle, :Core/Infra/Plugins, :Core/Infra/Transport API, :Security/License, :Core/Infra/Monitoring, :Delivery/Packaging, :Distributed Indexing/Searchable Snapshots, :Distributed/SLM, :Distributed Coordination/Snapshot/Restore, :Data Management/Stats, :Data Management/Watcher, :Data Management/Other"
      publish:
        areas:
          - Allocation
          - Audit
          - Authentication
          - Autoscaling
          - CCR
          - CCS
          - "Cluster coordination"
          - Codec
          - "Discovery-Plugins"
          - Engine
          - FIPS
          - Health
          - ILM
          - IdentityProvider
          - "Infra/Circuit breakers"
          - "Infra/CLI"
          - "Infra/Core"
          - "Infra/Entitlements"
          - "Infra/Logging"
          - "Infra/Metrics"
          - "Infra/Node lifecycle"
          - "Infra/Plugins"
          - "Infra/Transport API"
          - License
          - Monitoring
          - Packaging
          - "Searchable snapshots"
          - SLM
          - "Snapshot and restore"
          - Stats
          - Watcher
        types:
          - docs
# Bundle configuration (profiles and defaults)
bundle:
  # Input directory containing changelog YAML files
  # directory: docs/changelog
  # Output directory for bundled changelog files
  # output_directory: docs/releases
  # Whether to resolve (copy contents) by default
  resolve: true

  # Named bundle profiles for different release scenarios
  # profiles:
    # Example: Elasticsearch release profile
    # elasticsearch-release:
    #   products: "elasticsearch {version} {lifecycle}"
    #   output: "elasticsearch-{version}.yaml"

    # Example: Serverless release profile
    # serverless-release:
    #   products: "cloud-serverless {version} *"
    #   output: "serverless-{version}.yaml"
